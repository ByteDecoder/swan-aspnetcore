<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title> SWAN: Stuff We All Need | Unosquare SWAN ASPNetCore </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content=" SWAN: Stuff We All Need | Unosquare SWAN ASPNetCore ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p><a href="https://travis-ci.org/unosquare/swan-aspnetcore"><img src="https://travis-ci.org/unosquare/swan-aspnetcore.svg?branch=master" alt="Build Status"></a>
<a href="https://ci.appveyor.com/project/geoperez/swan-aspnetcore/branch/master"><img src="https://ci.appveyor.com/api/projects/status/q408tg5jd9bm0jak/branch/master?svg=true" alt="Build status"></a>
<a href="https://coveralls.io/github/unosquare/swan-aspnetcore?branch=master"><img src="https://coveralls.io/repos/github/unosquare/swan-aspnetcore/badge.svg?branch=master" alt="Coverage Status"></a></p>
<h1 id="img-srchttpsgithubcomunosquareswanrawmasterswan-logo-32pngimg-swan-stuff-we-all-need"><img src="https://github.com/unosquare/swan/raw/master/swan-logo-32.png"> SWAN: Stuff We All Need</h1>
<p><em><span class="emoji" shortcode="star">⭐</span> Please star this project if you find it useful!</em></p>
<h1 id="swan-aspnet-core-2">Swan ASP.NET Core 2</h1>
<p>A set of libraries to use with ASP.NET Core 2.0 applications. Also, includes a configure middleware and extension to setup your project. ASP.NET Core 2.0 came with a lot of changes, including authentication and authorization, here with Swan ASP.NET Core 2.0 is easy to configure and start working on your project.</p>
<h2 id="nuget-installation">NuGet Installation:</h2>
<p><a href="https://badge.fury.io/nu/Unosquare.Swan.AspNetCore"><img src="https://badge.fury.io/nu/Unosquare.Swan.AspNetCore.svg" alt="NuGet version"></a></p>
<pre><code>PM&gt; Install-Package Unosquare.Swan.AspNetCore
</code></pre><h2 id="use-cases">Use Cases</h2>
<p>Here we can find very useful code to use in our project configuration. All of this you can use it in your Startup.cs file, see our <a href="https://github.com/unosquare/swan-aspnetcore/tree/master/src/Unosquare.Swan.AspNetCore.Sample">Sample Project</a> for more reference.</p>
<h3 id="add-bearertokenauthentication-and-use-bearertokenauthentication">Add BearerTokenAuthentication and Use BearerTokenAuthentication</h3>
<p>Add BearerTokenAuthentication adds the services that are going to be used in your application. This method uses the Jwt schemes and adds a JwtBearer with the Token Validation Parameters that you configure. Jwt stands for <a href="https://jwt.io/introduction/">JSON Web Tokens</a></p>
<p>Use BearerTokenAuthentication is important because it gives the application the requirements to use authentication and authorization with JWT.</p>
<p>With this configuration, you just need to add the data annotation [Authorize] to your API to say that the user needs to be authorized to access that part of your project.</p>
<p>This two are used together because you need to add the bearer token authentication to the services to use the bearer token authentication in your application. You just need to added in your <code>ConfigureServices</code> and your <code>Configure</code>.</p>
<pre><code class="lang-csharp">// This method gets called by the runtime. Use this method to add services to the container
public void ConfigureServices(IServiceCollection services)
{
    // Extension method to add Bearer authentication
    services.AddBearerTokenAuthentication(ValidationParameters);
}

// This method gets called by the runtime. Use this method to configure the HTTP request pipeline
public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
{
    // Use the bearer token provider and check Admin and Pass.word as valid credentials
    app.UseBearerTokenAuthentication(
        ValidationParameters,
        (username, password, grantType, clientId) =&gt;
        {
            if (username != &quot;Admin&quot; || password != &quot;Pass.word&quot;)
                return Task.FromResult&lt;ClaimsIdentity&gt;(null);

            var claim = new ClaimsIdentity(&quot;Bearer&quot;);
            claim.AddClaim(new Claim(ClaimTypes.Name, username));

            return Task.FromResult(claim);
        }, (identity, obj) =&gt;
        {
            // This action is optional
            obj[&quot;test&quot;] = &quot;OK&quot;;
            return Task.FromResult(obj);
        });
}
</code></pre><h3 id="entityframeworklogger">EntityFrameworkLogger</h3>
<p>Represents a Logger using EntityFramework. Adds an entity framework logger. It will help you log to your Database everything necessary to know what’s going on in your application. This logger is used in the <code>Configure</code> method of your Startup.cs file.</p>
<pre><code class="lang-csharp">public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
{
    // Log levels set in your configuration
    loggerFactory.AddConsole(Configuration.GetSection(&quot;Logging&quot;));
    // Here we add the entity framework with the database and the model to utilize
    loggerFactory.AddEntityFramework&lt;SampleDbContext, Models.LogEntry&gt;(app.ApplicationServices);
}
</code></pre><h3 id="audittrail">AuditTrail</h3>
<p><a href="https://github.com/unosquare/ef-enterpriseextensions">Audit Trails</a> is a task to save the changes to any operation perform in a record. In other words, capture what change between any data saving. This operation is important in many system and you can accomplish with these extensions easily. The AuditTrailController can be attached to your BusinessDbContext and setup which Entities will be recorded in the three CRUD actions supported, create, update and delete.</p>
<pre><code class="lang-csharp">public class SampleDbContext : BusinessDbContext
    {
         public SampleDbContext(DbContextOptions&lt;SampleDbContext&gt; options, IHttpContextAccessor httpContextAccessor)
            : base(options)
        {
            var auditController = new AuditTrailController&lt;SampleDbContext, AuditTrailEntry&gt;(this,
                httpContextAccessor?.HttpContext?.User?.Identity?.Name);
            auditController.AddTypes(ActionFlags.Create, new[] {typeof(Product)});

            AddController(auditController);
        }

        public DbSet&lt;AuditTrailEntry&gt; AuditTrailEntries { get; set; }
    }
</code></pre><h3 id="usejsonexceptionhandler">UseJsonExceptionHandler</h3>
<p>It&#39;s very useful to see exceptions in JSON format. You can use this extension to add a very good way to debug your application, you just need to add this to your application builder in the Configure method of your Startup.cs</p>
<pre><code class="lang-csharp">// Response an exception as JSON at error
app.UseJsonExceptionHandler();
</code></pre><h3 id="usefallback">UseFallback</h3>
<p>Uses the fallback to redirect everything without extension. When the application encountered something without an extension this will help to redirect to the index page or where ever you define to.</p>
<pre><code class="lang-csharp">// Redirect anything without extension to index.html
app.UseFallback();
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/unosquare/swan-aspnetcore/blob/UnitTests/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
